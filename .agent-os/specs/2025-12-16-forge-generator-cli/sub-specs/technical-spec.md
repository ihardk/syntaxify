# Technical Specification

This is the technical specification for the spec detailed in @.agent-os/specs/2025-12-16-forge-generator-cli/spec.md

## Technical Requirements

### Project Structure
```
generator/
├── bin/
│   └── forge.dart        # CLI entry point
├── lib/
│   ├── src/
│   │   ├── cli/          # Command parsing
│   │   ├── parser/       # Meta file parsing
│   │   ├── generator/    # Code generation
│   │   └── writer/       # File output
│   └── forge.dart        # Library exports
├── pubspec.yaml
└── test/
```

### CLI Commands

| Command | Description |
|---------|-------------|
| `forge build` | Generate all components |
| `forge build --component=button` | Generate single component |
| `forge clean` | Remove generated files |
| `forge watch` | Watch mode (future) |

### Meta File Format

```dart
// meta/button.meta.dart
@MetaComponent()
class ButtonMeta {
  @Required() final String label;
  @Optional() final VoidCallback? onPressed;
  @Variant(['primary', 'secondary']) final String variant;
}
```

### Generated Output Format

```dart
// ============================================
// GENERATED BY FORGE v0.1.0
// Source: meta/button.meta.dart
// Generated: 2025-12-16T12:00:00Z
// Checksum: abc123
// ============================================

class AppButton extends StatelessWidget {
  final String label;
  final VoidCallback? onPressed;
  
  const AppButton({super.key, required this.label, this.onPressed});
  
  @override
  Widget build(BuildContext context) {
    final tokens = ForgeTheme.of(context).button;
    return GestureDetector(
      onTap: onPressed,
      child: Container(
        padding: tokens.padding,
        decoration: BoxDecoration(
          color: tokens.bgColor,
          borderRadius: BorderRadius.circular(tokens.radius),
        ),
        child: Text(label, style: TextStyle(color: tokens.textColor)),
      ),
    );
  }
}
```

## Dependencies

```yaml
# generator/pubspec.yaml
dependencies:
  args: ^2.4.0      # CLI argument parsing
  path: ^1.8.0      # File path handling
  
dev_dependencies:
  test: ^1.24.0
  lints: ^3.0.0
```

## Performance Targets

- Build time: < 2s for 10 components
- Memory: < 100MB during generation
